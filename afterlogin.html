<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FinSecure - Detailed View</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .accordion-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out;
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">

    <!-- Main Container -->
    <div id="app-container" class="min-h-screen p-4 sm:p-6 md:p-8">
        
        <header class="max-w-5xl mx-auto mb-8 text-center">
            <a href="a.html" class="inline-block bg-blue-600 text-white font-semibold py-2 px-6 rounded-lg hover:bg-blue-700 transition-all shadow-md mb-8">
                &larr; Back to Interactive Simulation
            </a>
        </header>

        <!-- Dashboard Page View -->
        <section id="dashboard-page" class="max-w-5xl mx-auto mb-16">
            <header class="mb-8 flex items-center justify-between">
                <div>
                    <h1 class="text-3xl sm:text-4xl font-bold text-blue-600">Welcome, <span id="user-name">Priya Sharma</span>!</h1>
                    <p class="mt-2 text-lg text-gray-600">Here's your financial overview.</p>
                </div>
            </header>
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                <!-- Left Column -->
                <div class="lg:col-span-2 space-y-6">
                    <!-- Account Summary -->
                    <div class="bg-white p-6 rounded-2xl shadow-lg border border-gray-100">
                         <h2 class="text-xl font-bold mb-4">Account Summary</h2>
                         <p class="text-gray-500">Available Balance</p>
                         <p class="text-4xl font-bold text-blue-600 mb-4" id="account-balance">‚Çπ10150.20</p>
                         <div class="flex space-x-4">
                             <button class="flex-1 bg-blue-600 text-white font-semibold py-3 px-4 rounded-lg hover:bg-blue-700 transition">Transfer Money</button>
                             <button class="flex-1 bg-gray-200 text-gray-700 font-semibold py-3 px-4 rounded-lg hover:bg-gray-300 transition">Pay Bills</button>
                         </div>
                    </div>
                    <!-- Spending Habits -->
                    <div class="bg-white p-6 rounded-2xl shadow-lg border border-gray-100">
                        <h2 class="text-xl font-bold mb-4">Spending Habits (Last 30 Days)</h2>
                        <div class="h-64 w-full flex items-center justify-center">
                            <canvas id="spending-chart"></canvas>
                        </div>
                    </div>
                </div>
                <!-- Right Column -->
                <div class="lg:col-span-1 space-y-6">
                    <!-- Credit Score -->
                    <div class="bg-white p-6 rounded-2xl shadow-lg border border-gray-100 h-full">
                        <h2 class="text-xl font-bold mb-2">Alternative Credit Score</h2>
                        <div class="text-center my-4">
                            <p class="text-6xl font-bold text-green-500" id="credit-score">783</p>
                            <p class="font-semibold text-green-600" id="credit-rating">Excellent</p>
                        </div>
                        <div id="credit-factors" class="space-y-3 text-sm">
                            <!-- Populated by JS -->
                        </div>
                    </div>
                </div>
                 <!-- Recent Transactions -->
                 <div class="lg:col-span-3 bg-white p-6 rounded-2xl shadow-lg border border-gray-100">
                    <h2 class="text-xl font-bold mb-4">Recent Transactions</h2>
                    <ul id="transactions-list" class="space-y-4">
                        <!-- Populated by JS -->
                    </ul>
                </div>
            </div>
        </section>

        <!-- USP Page View -->
        <section id="usp-page" class="max-w-4xl mx-auto">
            <header class="mb-8">
                 <h1 class="text-3xl sm:text-4xl font-bold text-blue-600">Unique Selling Proposition</h1>
                 <p class="mt-2 text-lg text-gray-600">How We Redefine Credit Scoring</p>
            </header>

            <div class="space-y-4">
                <!-- Accordion Item 1 -->
                <div class="accordion-item bg-white rounded-xl border border-gray-200 shadow-sm">
                    <button class="accordion-header w-full text-left p-5 font-semibold text-lg flex justify-between items-center">
                        <span>Our One-Line USP</span>
                        <svg class="w-5 h-5 transform transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                    </button>
                    <div class="accordion-content px-5 pb-5">
                        <p class="text-gray-700 font-semibold text-lg">‚ÄúReal-time, explainable credit scoring for students, freelancers & gig workers using consented UPI + bill + wallet signals ‚Äî unlocking credit where bureau data fails.‚Äù</p>
                    </div>
                </div>

                <!-- Accordion Item 2 -->
                <div class="accordion-item bg-white rounded-xl border border-gray-200 shadow-sm">
                    <button class="accordion-header w-full text-left p-5 font-semibold text-lg flex justify-between items-center">
                        <span>Why We're Different from CIBIL</span>
                        <svg class="w-5 h-5 transform transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                    </button>
                    <div class="accordion-content px-5 pb-5 text-gray-700 space-y-4">
                        <p>A CIBIL score is a traditional credit score derived from a user's credit history. It fails for large segments of the population. Here's a breakdown of what CIBIL can't do and what our alternative model can:</p>
                        <h4 class="font-bold text-xl mt-4">1. What CIBIL is unable to do üßê</h4>
                        <ul class="list-disc list-inside space-y-2">
                            <li><b>Assess "Credit-Invisible" Individuals:</b> CIBIL requires an existing credit history. Students and freelancers often lack this.</li>
                            <li><b>Capture Real-Time Financial Habits:</b> CIBIL reports are updated periodically, not reflecting current financial situations.</li>
                            <li><b>Evaluate "Thin-File" Customers:</b> Limited data makes it hard for CIBIL to predict creditworthiness accurately.</li>
                            <li><b>Account for Non-Traditional Income:</b> CIBIL is blind to income from gig work, freelance projects, or consistent bill payments.</li>
                        </ul>
                        <h4 class="font-bold text-xl mt-4">2. What Our Product Can Do üìà</h4>
                        <ul class="list-disc list-inside space-y-2">
                            <li><b>Analyze Inflows and Spending:</b> We analyze income consistency from various sources to build a picture of financial stability.</li>
                            <li><b>Track Payment Discipline:</b> On-time utility, rent, and subscription payments demonstrate a user's reliability.</li>
                            <li><b>Identify Behavioral Risk Flags:</b> Our model detects anomalies like sudden spending spikes or high-risk merchant transactions.</li>
                            <li><b>Measure Financial Health:</b> We use sophisticated metrics like income-to-expense and savings ratios to show responsible money management.</li>
                        </ul>
                    </div>
                </div>
                
                <!-- Accordion Item 3 -->
                 <div class="accordion-item bg-white rounded-xl border border-gray-200 shadow-sm">
                    <button class="accordion-header w-full text-left p-5 font-semibold text-lg flex justify-between items-center">
                        <span>Pricing & Business Model</span>
                        <svg class="w-5 h-5 transform transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                    </button>
                    <div class="accordion-content px-5 pb-5 text-gray-700 space-y-4">
                        <h4 class="font-bold text-xl mt-4">Pricing Strategy</h4>
                         <p>Our primary model is <strong>per-decision</strong>, priced based on volume (e.g., ‚Çπ3 ‚Äì ‚Çπ30 per score). We also offer SaaS subscriptions and revenue-share options for flexibility.</p>
                         <h4 class="font-bold text-xl mt-4">Business Model</h4>
                         <p>We operate on a B2B model, selling to BNPL providers, fintech lenders, and digital banks. Our go-to-market strategy starts with pilot programs to demonstrate clear value, converting them into long-term contracts.</p>
                          <h4 class="font-bold text-xl mt-4">Elevator Pitch</h4>
                         <p class="italic">‚ÄúPay-per-decision alternative credit scoring that instantly qualifies underbanked students & gig workers using live UPI + bill signals‚Äîreduce rejections, improve conversion, and keep defaults low.‚Äù</p>
                    </div>
                </div>

            </div>
        </section>

    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            let spendingChart = null;

            // --- Dashboard Data Loading ---
            async function populateDashboard() {
                try {
                    const response = await fetch('database.json');
                    if (!response.ok) throw new Error('Database not found');
                    const data = await response.json();
                    
                    document.getElementById('user-name').textContent = data.userInfo.name;
                    document.getElementById('account-balance').textContent = `‚Çπ${data.account.balance.toLocaleString('en-IN')}`;
                    document.getElementById('credit-score').textContent = data.creditScore.score;
                    document.getElementById('credit-rating').textContent = data.creditScore.rating;
                    
                    // Populate Transactions
                    const transactionsList = document.getElementById('transactions-list');
                    transactionsList.innerHTML = ''; // Clear old data
                    data.transactions.forEach(tx => {
                        const li = document.createElement('li');
                        li.className = 'flex justify-between items-center border-b border-gray-100 pb-3 last:border-b-0 last:pb-0';
                        const isDebit = tx.type === 'debit';

                        // -- CORRECTED PART --
                        // We now use full class names in ternary operators so Tailwind can detect them.
                        const amountClasses = isDebit ? 'text-red-600' : 'text-green-600';
                        const iconBgClasses = isDebit ? 'bg-red-100 text-red-600' : 'bg-green-100 text-green-600';
                        const sign = isDebit ? '-' : '+';
                        
                        li.innerHTML = `
                            <div class="flex items-center">
                                <div class="mr-4 h-10 w-10 rounded-full ${iconBgClasses} flex items-center justify-center font-bold text-lg">${tx.merchant.charAt(0)}</div>
                                <div>
                                    <p class="font-semibold">${tx.merchant}</p>
                                    <p class="text-sm text-gray-500">${tx.date}</p>
                                </div>
                            </div>
                            <p class="font-bold ${amountClasses}">${sign} ‚Çπ${tx.amount.toLocaleString('en-IN')}</p>
                        `;
                        transactionsList.appendChild(li);
                    });

                    // Populate Credit Factors
                    const creditFactors = document.getElementById('credit-factors');
                    creditFactors.innerHTML = ''; // Clear old data
                    data.creditScore.factors.forEach(factor => {
                        const div = document.createElement('div');
                        div.className = 'flex items-center';
                        const iconColor = factor.positive ? 'text-green-500' : 'text-yellow-500';
                        const icon = factor.positive ? '‚úì' : '!';
                        div.innerHTML = `
                            <span class="mr-2 ${iconColor}">${icon}</span>
                            <p>${factor.description}</p>
                        `;
                        creditFactors.appendChild(div);
                    });

                    renderSpendingChart(data.spendingByCategory);

                } catch (error) {
                    console.error("Failed to load dashboard data:", error);
                    // Optionally show an error message on the UI
                }
            }
            
            function renderSpendingChart(data) {
                const ctx = document.getElementById('spending-chart').getContext('2d');
                if (spendingChart) {
                    spendingChart.destroy();
                }
                spendingChart = new Chart(ctx, {
                    type: 'doughnut',
                    data: {
                        labels: Object.keys(data),
                        datasets: [{
                            label: 'Spending',
                            data: Object.values(data),
                            backgroundColor: [
                                'rgba(59, 130, 246, 0.8)',
                                'rgba(239, 68, 68, 0.8)',
                                'rgba(16, 185, 129, 0.8)',
                                'rgba(245, 158, 11, 0.8)',
                                'rgba(139, 92, 246, 0.8)',
                            ],
                            borderColor: [
                                'rgba(59, 130, 246, 1)',
                                'rgba(239, 68, 68, 1)',
                                'rgba(16, 185, 129, 1)',
                                'rgba(245, 158, 11, 1)',
                                'rgba(139, 92, 246, 1)',
                            ],
                            borderWidth: 1
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                position: 'bottom',
                            },
                        }
                    }
                });
            }

            // --- Accordion Logic ---
            document.querySelectorAll('.accordion-header').forEach(header => {
                header.addEventListener('click', () => {
                    const content = header.nextElementSibling;
                    const icon = header.querySelector('svg');
                    document.querySelectorAll('.accordion-content').forEach(c => {
                        if (c !== content) {
                            c.style.maxHeight = null;
                            c.previousElementSibling.querySelector('svg').classList.remove('rotate-180');
                        }
                    });
                    if (content.style.maxHeight) {
                        content.style.maxHeight = null;
                        icon.classList.remove('rotate-180');
                    } else {
                        content.style.maxHeight = content.scrollHeight + "px";
                        icon.classList.add('rotate-180');
                    }
                });
            });

            // Load data when the page loads
            populateDashboard();
        });
    </script>
</body>
</html>
